
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="dirty_cat.deduplicate" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://dirty-cat.github.io/stable/generated/dirty_cat.deduplicate.html" />
<meta property="og:site_name" content="dirty_cat" />
<meta property="og:description" content="Examples using dirty_cat.deduplicate: Deduplicating misspelled categories with deduplicate Deduplicating misspelled categories with deduplicate" />
<meta property="og:image" content="https://dirty-cat.github.io/stable/_images/sphx_glr_06_deduplication_thumb.png" />
<meta property="og:image:alt" content="Deduplicating misspelled categories with deduplicate" />
<meta name="description" content="Examples using dirty_cat.deduplicate: Deduplicating misspelled categories with deduplicate Deduplicating misspelled categories with deduplicate" />

    <title>dirty_cat.deduplicate &#8212; dirty_cat</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scrolltoc.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="dirty_cat.datasets.fetch_employee_salaries" href="dirty_cat.datasets.fetch_employee_salaries.html" />
    <link rel="prev" title="dirty_cat.FeatureAugmenter" href="dirty_cat.FeatureAugmenter.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!--
    Inherited from the original Alabaster theme:
    https://github.com/bitprophet/alabaster/blob/master/alabaster/about.html
    Only the "Version" number is added.
-->


<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/dirty_cat.svg" alt="Logo"/>
    
    <h1 class="logo logo-name">dirty_cat</h1>
    
  </a>
  <div class="version-switcher">
    <h4>Version 0.4.0</h4>
    <details>
	<summary>Other versions</summary>
	<ul>
	    <li><a href="https://dirty-cat.github.io/stable">Stable</a></li>
	    <li><a href="https://dirty-cat.github.io/dev">Dev</a></li>
	</ul>
    </details>
  </div>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=dirty-cat&repo=dirty_cat&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<ul>
    <li class="toctree-l1"><a href="../index.html#usage-examples">Usage</a></li>
    <li class="toctree-l1"><a href="../index.html#api-documentation">API</a></li>
    <li class="toctree-l1"><a href="../index.html#about">About</a></li>
</ul>
  <h3 class="this-page"><a href="../index.html">This page</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dirty_cat</span></code>.deduplicate</a><ul>
<li><a class="reference internal" href="#examples-using-dirty-cat-deduplicate">Examples using <code class="docutils literal notranslate"><span class="pre">dirty_cat.deduplicate</span></code></a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="dirty_cat.FeatureAugmenter.html" title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dirty_cat</span></code>.FeatureAugmenter</a></li>
      <li>Next: <a href="dirty_cat.datasets.fetch_employee_salaries.html" title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dirty_cat.datasets</span></code>.fetch_employee_salaries</a></li>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="dirty-cat-deduplicate">
<h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">dirty_cat</span></code>.deduplicate<a class="headerlink" href="#dirty-cat-deduplicate" title="Permalink to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="dirty_cat.deduplicate">
<span class="sig-prename descclassname"><span class="pre">dirty_cat.</span></span><span class="sig-name descname"><span class="pre">deduplicate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_clusters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngram_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">4)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analyzer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'char_wb'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'average'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/dirty-cat/dirty-cat/blob/17b270b/dirty_cat/_deduplicate.py#L122"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dirty_cat.deduplicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Deduplicate data by hierarchically clustering similar strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">Sequence[str]</span></dt><dd><p>The data to be deduplicated.</p>
</dd>
<dt><strong>n_clusters</strong><span class="classifier">Optional[int], optional, default=None</span></dt><dd><p>Number of clusters to use for hierarchical clustering, if None use the
number of clusters that lead to the lowest silhouette score.</p>
</dd>
<dt><strong>ngram_range</strong><span class="classifier">Tuple[int, int], optional, default=(2, 4)</span></dt><dd><p>Range to use for computing n-gram distance.</p>
</dd>
<dt><strong>analyzer</strong><span class="classifier">typing.Literal[“word”, “char”, “char_wb”], optional, default=`char_wb`</span></dt><dd><p>Analyzer parameter for the CountVectorizer used for the string
similarities.
Options: {<cite>word</cite>, <cite>char</cite>, <cite>char_wb</cite>}, describing whether the matrix V
to factorize should be made of word counts or character n-gram counts.
Option <cite>char_wb</cite> creates character n-grams only from text inside word
boundaries; n-grams at the edges of words are padded with space.</p>
</dd>
<dt><strong>method</strong><span class="classifier">str, optional, default=`average`</span></dt><dd><p>Linkage method parameter to use for merging clusters via scipy’s
<cite>linkage</cite> method.
Options: {<cite>single</cite>, <cite>complete</cite>, <cite>average</cite>, <cite>centroid</cite>, <cite>median</cite>, <cite>ward</cite>},
describing different methods to calculate the distance between two clusters.
Option <cite>average</cite> calculates the distance between two clusters as the average
distance between data points in the first and second cluster.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>List[str]</dt><dd><p>The deduplicated data.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="dirty_cat.GapEncoder.html#dirty_cat.GapEncoder" title="dirty_cat.GapEncoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">GapEncoder</span></code></a></dt><dd><p>Encodes dirty categories (strings) by constructing latent topics with continuous encoding.</p>
</dd>
<dt><a class="reference internal" href="dirty_cat.MinHashEncoder.html#dirty_cat.MinHashEncoder" title="dirty_cat.MinHashEncoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">MinHashEncoder</span></code></a></dt><dd><p>Encode string columns as a numeric array with the minhash method.</p>
</dd>
<dt><a class="reference internal" href="dirty_cat.SimilarityEncoder.html#dirty_cat.SimilarityEncoder" title="dirty_cat.SimilarityEncoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimilarityEncoder</span></code></a></dt><dd><p>Encode string columns as a numeric array with n-gram string similarity.</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>Deduplication is done by first computing the n-gram distance between unique
categories in data, then performing hierarchical clustering on this distance
matrix, and choosing the most frequent element in each cluster as the
‘correct’ spelling. This method works best if the true number of
categories is significantly smaller than the number of observed spellings.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dirty_cat.datasets</span> <span class="kn">import</span> <span class="n">make_deduplication_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">duplicated</span> <span class="o">=</span> <span class="n">make_deduplication_data</span><span class="p">(</span><span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">],</span>
<span class="go">                                         entries_per_example=[5, 5],</span>
<span class="go">                                         prob_mistake_per_letter=0.3,</span>
<span class="go">                                         random_state=42)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">duplicated</span>
<span class="go">[&#39;blacn&#39;, &#39;black&#39;, &#39;black&#39;, &#39;black&#39;, &#39;black&#39;,</span>
<span class="go"> &#39;hvite&#39;, &#39;white&#39;, &#39;white&#39;, &#39;white&#39;, &#39;white&#39;]</span>
</pre></div>
</div>
<p>To deduplicate the data, we can build a correspondance matrix:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deduplicate_correspondence</span> <span class="o">=</span> <span class="n">deduplicate</span><span class="p">(</span><span class="n">duplicated</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deduplicate_correspondence</span>
<span class="go">blacn    black</span>
<span class="go">black    black</span>
<span class="go">black    black</span>
<span class="go">black    black</span>
<span class="go">black    black</span>
<span class="go">hvite    white</span>
<span class="go">white    white</span>
<span class="go">white    white</span>
<span class="go">white    white</span>
<span class="go">white    white</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>The translation table above is actually a series, giving the deduplicated values,
and indexed by the original values.
A deduplicated version of the initial list can easily be created:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deduplicated</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">deduplicate_correspondence</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deduplicated</span>
<span class="go">[&#39;black&#39;, &#39;black&#39;, &#39;black&#39;, &#39;black&#39;, &#39;black&#39;,</span>
<span class="go">&#39;white&#39;, &#39;white&#39;, &#39;white&#39;, &#39;white&#39;, &#39;white&#39;]</span>
</pre></div>
</div>
<p>We have our dirty categories deduplicated.</p>
</dd></dl>

<section id="examples-using-dirty-cat-deduplicate">
<h2>Examples using <code class="docutils literal notranslate"><span class="pre">dirty_cat.deduplicate</span></code><a class="headerlink" href="#examples-using-dirty-cat-deduplicate" title="Permalink to this heading">¶</a></h2>
<div class="sphx-glr-thumbnails"><div class="sphx-glr-thumbcontainer" tooltip="Real world datasets often come with slight misspellings in the category names, for instance if ..."><img alt="Deduplicating misspelled categories with deduplicate" src="../_images/sphx_glr_06_deduplication_thumb.png" />
<p><a class="reference internal" href="../auto_examples/06_deduplication.html#sphx-glr-auto-examples-06-deduplication-py"><span class="std std-ref">Deduplicating misspelled categories with deduplicate</span></a></p>
  <div class="sphx-glr-thumbnail-title">Deduplicating misspelled categories with deduplicate</div>
</div></div><div class="clearer"></div></section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2018-2023, the dirty_cat developers.
      
      |
      <a href="../_sources/generated/dirty_cat.deduplicate.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>