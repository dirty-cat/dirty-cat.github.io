
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dirty_cat.SimilarityEncoder &#8212; dirty_cat 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-rendered-html.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="dirty_cat.TargetEncoder" href="dirty_cat.TargetEncoder.html" />
    <link rel="prev" title="dirty_cat.MinHashEncoder" href="dirty_cat.MinHashEncoder.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/dirty_cat.svg" alt="Logo"/>
    
    <h1 class="logo logo-name">dirty_cat</h1>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=dirty-cat&repo=dirty_cat&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<hr />
<ul>
    <li class="toctree-l1"><a href="../index.html#using-dirty-cat">Usage</a></li>
    <li class="toctree-l1"><a href="../index.html#api-documentation">API</a></li>
    <li class="toctree-l1"><a href="../index.html#about">About</a></li>
</ul><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="dirty_cat.MinHashEncoder.html" title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dirty_cat</span></code>.MinHashEncoder</a></li>
      <li>Next: <a href="dirty_cat.TargetEncoder.html" title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dirty_cat</span></code>.TargetEncoder</a></li>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="dirty-cat-similarityencoder">
<h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">dirty_cat</span></code>.SimilarityEncoder<a class="headerlink" href="#dirty-cat-similarityencoder" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="dirty_cat.SimilarityEncoder">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">dirty_cat.</span></code><code class="sig-name descname"><span class="pre">SimilarityEncoder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">similarity='ngram'</span></em>, <em class="sig-param"><span class="pre">ngram_range=(2</span></em>, <em class="sig-param"><span class="pre">4)</span></em>, <em class="sig-param"><span class="pre">categories='auto'</span></em>, <em class="sig-param"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float64'&gt;</span></em>, <em class="sig-param"><span class="pre">handle_unknown='ignore'</span></em>, <em class="sig-param"><span class="pre">handle_missing=''</span></em>, <em class="sig-param"><span class="pre">hashing_dim=None</span></em>, <em class="sig-param"><span class="pre">n_prototypes=None</span></em>, <em class="sig-param"><span class="pre">random_state=None</span></em>, <em class="sig-param"><span class="pre">n_jobs=None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dirty_cat/similarity_encoder.html#SimilarityEncoder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dirty_cat.SimilarityEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode string categorical features as a numeric array.</p>
<p>The input to this transformer should be an array-like of
strings.
The method is based on calculating the morphological similarities
between the categories.
The categories can be encoded using one of the implemented string
similarities: <code class="docutils literal notranslate"><span class="pre">similarity='ngram'</span></code> (default), ‘levenshtein-ratio’,
‘jaro’, or ‘jaro-winkler’.
This encoding is an alternative to OneHotEncoder in the case of
dirty categorical variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>similarity</strong> (<em>str {'ngram'</em><em>, </em><em>'levenshtein-ratio'</em><em>, </em><em>'jaro'</em><em>, </em><em>or'jaro-winkler'}</em>) – The type of pairwise string similarity to use.</p></li>
<li><p><strong>ngram_range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em> (</em><em>min_n</em><em>, </em><em>max_n</em><em>)</em><em>, </em><em>default=</em><em>(</em><em>2</em><em>, </em><em>4</em><em>)</em>) – Only significant for <code class="docutils literal notranslate"><span class="pre">similarity='ngram'</span></code>. The range of
values for the n_gram similarity.</p></li>
<li><p><strong>categories</strong> (<em>'auto'</em><em>, </em><em>'k-means'</em><em>, </em><em>'most_frequent'</em><em> or </em><em>a list of lists/arrays</em>) – </p></li>
<li><p><strong>values.</strong> (<em>of</em>) – <p>Categories (unique values) per feature:</p>
<ul>
<li><p>’auto’ : Determine categories automatically from the training data.</p></li>
<li><p>list : <code class="docutils literal notranslate"><span class="pre">categories[i]</span></code> holds the categories expected in the i-th
column. The passed categories must be sorted and should not mix
strings and numeric values.</p></li>
<li><dl class="simple">
<dt>’most_frequent’<span class="classifier">Computes the most frequent values for every</span></dt><dd><p>categorical variable</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’k-means’<span class="classifier">Computes the K nearest neighbors of K-mean centroids</span></dt><dd><p>in order to choose the prototype categories</p>
</dd>
</dl>
</li>
</ul>
<p>The categories used can be found in the <code class="docutils literal notranslate"><span class="pre">categories_</span></code> attribute.</p>
</p></li>
<li><p><strong>dtype</strong> (<em>number type</em><em>, </em><em>default np.float64</em>) – Desired dtype of output.</p></li>
<li><p><strong>handle_unknown</strong> (<em>'error'</em><em> or </em><em>'ignore'</em><em> (</em><em>default</em><em>)</em>) – Whether to raise an error or ignore if a unknown categorical feature is
present during transform (default is to ignore). When this parameter
is set to ‘ignore’ and an unknown category is encountered during
transform, the resulting one-hot encoded columns for this feature
will be all zeros. In the inverse transform, an unknown category
will be denoted as None.</p></li>
<li><p><strong>handle_missing</strong> (<em>'error'</em><em> or </em><em>''</em><em> (</em><em>default</em><em>)</em>) – Whether to raise an error or impute with blank string ‘’ if missing
values (NaN) are present during fit (default is to impute).
When this parameter is set to ‘’, and a missing value is encountered
during fit_transform, the resulting encoded columns for this feature
will be all zeros. In the inverse transform, the missing category
will be denoted as None.</p></li>
<li><p><strong>hashing_dim</strong> (<em>int type</em><em> or </em><em>None.</em>) – If None, the base vectorizer is CountVectorizer, else it’s set to
HashingVectorizer with a number of features equal to <cite>hashing_dim</cite>.</p></li>
<li><p><strong>n_prototypes</strong> (<em>number of prototype we want to use.</em>) – Useful when <cite>most_frequent</cite> or <cite>k-means</cite> is used.
Must be a positive non null integer.</p></li>
<li><p><strong>random_state</strong> (<em>either an int used as a seed</em><em>, </em><em>a RandomState instance</em><em> or </em><em>None.</em>) – Useful when <cite>k-means</cite> strategy is used.</p></li>
<li><p><strong>n_jobs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – maximum number of processes used to compute similarity matrices. Used
only if <code class="docutils literal notranslate"><span class="pre">fast=True</span></code> in <code class="docutils literal notranslate"><span class="pre">SimilarityEncoder.transform</span></code></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="dirty_cat.SimilarityEncoder.categories_">
<code class="sig-name descname"><span class="pre">categories_</span></code><a class="headerlink" href="#dirty_cat.SimilarityEncoder.categories_" title="Permalink to this definition">¶</a></dt>
<dd><p>The categories of each feature determined during fitting
(in order corresponding with output of <code class="docutils literal notranslate"><span class="pre">transform</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of arrays</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">References</p>
<p>For a detailed description of the method, see
<a class="reference external" href="https://hal.inria.fr/hal-01806175">Similarity encoding for learning with dirty categorical variables</a> by Cerda, Varoquaux, Kegl. 2018
(accepted for publication at: Machine Learning journal, Springer).</p>
<dl class="py method">
<dt id="dirty_cat.SimilarityEncoder.__init__">
<code class="sig-name descname"><span class="pre">__init__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">similarity='ngram'</span></em>, <em class="sig-param"><span class="pre">ngram_range=(2</span></em>, <em class="sig-param"><span class="pre">4)</span></em>, <em class="sig-param"><span class="pre">categories='auto'</span></em>, <em class="sig-param"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float64'&gt;</span></em>, <em class="sig-param"><span class="pre">handle_unknown='ignore'</span></em>, <em class="sig-param"><span class="pre">handle_missing=''</span></em>, <em class="sig-param"><span class="pre">hashing_dim=None</span></em>, <em class="sig-param"><span class="pre">n_prototypes=None</span></em>, <em class="sig-param"><span class="pre">random_state=None</span></em>, <em class="sig-param"><span class="pre">n_jobs=None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dirty_cat/similarity_encoder.html#SimilarityEncoder.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dirty_cat.SimilarityEncoder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

<div class="section" id="examples-using-dirty-cat-similarityencoder">
<h2>Examples using <code class="docutils literal notranslate"><span class="pre">dirty_cat.SimilarityEncoder</span></code><a class="headerlink" href="#examples-using-dirty-cat-similarityencoder" title="Permalink to this headline">¶</a></h2>
<div class="sphx-glr-thumbcontainer" tooltip="What are dirty categorical variables and how can a good encoding help with statistical learning..."><div class="figure align-default" id="id1">
<img alt="Investigating dirty categories" src="../_images/sphx_glr_01_investigating_dirty_categories_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/01_investigating_dirty_categories.html#sphx-glr-auto-examples-01-investigating-dirty-categories-py"><span class="std std-ref">Investigating dirty categories</span></a></span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="The `employee salaries &lt;https://catalog.data.gov/dataset/employee-salaries-2016&gt;`_ dataset cont..."><div class="figure align-default" id="id2">
<img alt="Predicting the salary of employees" src="../_images/sphx_glr_02_fit_predict_plot_employee_salaries_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/02_fit_predict_plot_employee_salaries.html#sphx-glr-auto-examples-02-fit-predict-plot-employee-salaries-py"><span class="std std-ref">Predicting the salary of employees</span></a></span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Let&#x27;s see how different encoding for the dirty column impact on the score of a classification p..."><div class="figure align-default" id="id3">
<img alt="Semantic variation in the &quot;Midwest&quot;" src="../_images/sphx_glr_03_fit_predict_plot_midwest_survey_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/03_fit_predict_plot_midwest_survey.html#sphx-glr-auto-examples-03-fit-predict-plot-midwest-survey-py"><span class="std std-ref">Semantic variation in the “Midwest”</span></a></span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="A very classic dilemna when training a machine learning model consists in choosing between usin..."><div class="figure align-default" id="id4">
<img alt="Fitting scalable, non-linear models on data with dirty categories" src="../_images/sphx_glr_05_scaling_non_linear_models_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/05_scaling_non_linear_models.html#sphx-glr-auto-examples-05-scaling-non-linear-models-py"><span class="std std-ref">Fitting scalable, non-linear models on data with dirty categories</span></a></span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Here we discuss how to apply efficiently SimilarityEncoder to larger datasets: reducing the num..."><div class="figure align-default" id="id5">
<img alt="Scalability considerations for similarity encoding" src="../_images/sphx_glr_06_dimension_reduction_and_performance_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/06_dimension_reduction_and_performance.html#sphx-glr-auto-examples-06-dimension-reduction-and-performance-py"><span class="std std-ref">Scalability considerations for similarity encoding</span></a></span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div><div class="clearer"></div></div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2018, dirty_cat developers.
      
      |
      <a href="../_sources/generated/dirty_cat.SimilarityEncoder.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>